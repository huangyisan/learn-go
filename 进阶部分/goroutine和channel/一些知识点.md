## GO协程和GO主线程
1. 协程可以理解为轻量级线程，在go的主线程里面可以跑多个协程。
2. 如果主线程执行完毕退出了，协程还没执行完，则协程会被退出。
3. 主线程是一个物理线程，直接作用刚在cpu上。是重量级， 非常消耗cpu资源。
4. 协程从主线程开启，是轻量级的线程，是逻辑态，对资源消耗相对小。
5. golang的协程机制是重要特点。可以轻松开启上万个协程。

##Go协程的特点
1. 有独立的栈空间
2. 共享程序堆空间
3. 调度由用户控制
4. 协程是轻量级的线程

## MPG调度模型
M: 操作系统的主线程
P: 协程执行需要的上下文(运行所需要的资源)
G: 协程

## 竞争
1. 编译阶段增加一个参数 -race 就可以知道是否存在竞争。go build -race xxx. 编译完后执行，就能看到是否有竞争。

## channel
1. channel的本质是一个数据结构-队列。
2. 数据是先进先出。
3. 线程安全，多goroutine访问时，不需要加锁，就是说channel本身就是线程安全的。
4. channel是有类型的，一个string的channel只能存放string。
5. channel是引用类型。
6. channel必须make后才能使用。
7. channel容量在make的时候就被决定了。无法像map slice那样动态扩容。
8. 当channel放满了，则无法继续放，如果取出了，则可以继续放。
9. 使用close函数可以关闭管道，此时管道只能读不能写。
10. channel支持for range遍历。不支持普通的for。

## 阻塞的问题
1. 即便写入的速度大于读取的速度，也不会产生阻塞。
2. 如果只写不读，那么channel满了就报错deadlock。